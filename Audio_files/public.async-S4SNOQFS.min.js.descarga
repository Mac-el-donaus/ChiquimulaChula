(function(){(function(g,b){"use strict";var a={isMobile:function(){return lhx.openBp.isiOS||lhx.openBp.isAndroid?"T":"F"},durationAll:18e5,close:function(){var t=this;$(".buoyFixedWrap").addClass("hidden"),setTimeout(function(){t.show(),t.aLen>1?t.pointerTo(null,0):t.aLen&&t.marquee.initRun()},this.durationAll)},show:function(){$(".buoyFixedWrap").removeClass("hidden")},init:function(){this.getData()},getData:function(){var t=this,n={isMobile:this.isMobile()};$.ajax({type:"POST",url:"/json/getSceneGuideWebInfo",dataType:"json",data:JSON.stringify(n),contentType:"application/json;charset=utf-8",timeout:3e4,success:function(e){e.code==="0"&&t.create(e.data)},error:function(e){}})},create:function(t){for(var n="",e=[],i=this.aLen=t.length,s=0;s<i;s++){var r=t[s],o=config.staticAddr+r.imgId,u="background-image: url('"+o+"')";/\.json$/ig.test(r.imgId)&&(u="",e.push({id:r.id,sourceUrl:o}));var d=r.url,h=' data-link="normal" target="_buoyWin" ';try{if(d){var x=d.lmx_parseToObjWithURL();x.openInBp==="T"&&(h="")}}catch(v){}n+='<a class="'+(s===0?"first":"")+'" href="'+d+'" '+h+'         data-id="'+r.id+'" data-positionId="'+r.position+'">   <div class="bg'+(u?"":" isLoading")+'" style="'+u+'"></div>   <div class="btn" style="background-color: '+r.buttonColor+';" >       <div class="textWrap">           <div class="text" data-text="'+r.content+'">'+r.content+'<div class="slot"></div></div>       </div>   </div></a>'}if($(".buoyFixedWrap .content").html(n),i&&this.show(),i>1)this.initRun();else if(!i)return;this.loadLottie(e),this.marquee.initRun()},marquee:{delayInitTransform:function(t){var n=this;this.delayTimeId&&clearTimeout(this.delayTimeId),this.delayTimeId=setTimeout(function(){$(".buoyFixedWrap .content a .textWrap .text").css({transform:"translateX(0)"}),n.stop(),!t&&n.run()},300)},initRun:function(){this.curIndex=0,this.left=0,this.beginTime=0,a.log.show();var t;a.aLen>1?t=$(".buoyFixedWrap .content a").eq(a.sliderIndex+1).attr("data-id"):a.aLen&&(t=$(".buoyFixedWrap .content a").attr("data-id")),this.$textWrap=$(".buoyFixedWrap .content a[data-id="+t+"]").find(".textWrap");var n=this.$text=this.$textWrap.find(".text");if(n.width()<=this.$textWrap.width()){this.delayInitTransform(!0);return}n.find(".slot").text(n.attr("data-text")),this.delayInitTransform()},animal:function(){var t=this.$text;++this.beginTime>50&&(this.left+=.3),this.left>t.width()+10&&(this.left=0,this.beginTime=0),t.css({transform:"translateX("+-this.left+"px)"}),this.run()},run:function(){var t=this;this.animationId=g.requestAnimationFrame(function(){t.animal()})},stop:function(){this.animationId&&cancelAnimationFrame(this.animationId)}},loadLottie:function(t){var n=this,e=t.length;!e||lhx.loadScript("/pc/js/lottie_svg.min.js",function(){for(var i=0;i<e;i++)n.loadJson(t[i])})},loadJson:function(t,n){$.ajax({type:"GET",url:t.sourceUrl,success:function(e){for(var i=$(".buoyFixedWrap .content a[data-id="+t.id+"]"),s=0,r=i.length;s<r;s++){var o=i.eq(s).find(".bg")[0];try{var u=lottie.loadAnimation({container:o,renderer:"svg",loop:!0,autoplay:!0,animationData:e});(function(d){u.addEventListener("DOMLoaded",function(){$(d).removeClass("isLoading"),n&&n()})})(o)}catch(d){}}}})},isInitRun:!1,curIndex:0,sliderIndex:0,$content:null,$a:null,duration:1e4,timeoutId:null,initRun:function(){this.curIndex=0,this.sliderIndex=0,!this.isInitRun&&(this.isInitRun=!0,this.$content=$(".buoyFixedWrap .content"),this.$a=this.$content.find("a"),this.$pointer=$(".buoyFixedWrap .pointer"),this.createPointer(),this.$content.append(this.$a.eq(0).clone()),this.$content.prepend(this.$a.eq(this.aLen-1).clone()),this.layoutA(),this.run(),this.touch())},layoutA:function(){for(var t=this.$content.find("a"),n=t.length,e=-100,i=0;i<n;i++)t.eq(i).css({left:0,transform:"translateX("+(e+i*100)+"%)"})},animal:function(){var t=this;if(++this.sliderIndex>this.aLen){this.sliderIndex=0,this.$content.css({transition:"none",transform:"translateX(0)"}),setTimeout(function(){t.animal()},100);return}this.$content.css({transition:"all 0.6s",transform:"translateX("+-this.sliderIndex*100+"%)"}),this.pointerChange(),this.marquee.initRun(),this.run()},run:function(){var t=this;this.timeoutId=setTimeout(function(){t.animal()},this.duration)},stop:function(){this.timeoutId&&clearInterval(this.timeoutId)},createPointer:function(){for(var t="",n=0;n<this.aLen;n++)n===this.curIndex?t+='<button class="current"></button>':t+="<button></button>";this.$pointer.html(t)},pointerChange:function(){var t=this.sliderIndex;this.sliderIndex>=this.aLen&&(t=0),this.$pointer.find("button").removeClass("current").eq(t).addClass("current")},pointerTo:function(t,n){t?this.sliderIndex=$(".buoyFixedWrap .pointer button").index(t):this.sliderIndex=n,this.stop(),this.$content.css({transition:"all 0.3s",transform:"translateX("+-this.sliderIndex*100+"%)"}),this.pointerChange(),this.marquee.initRun(),this.run()},touch:function(){var t=this,n=0,e=0,i=!0,s=0,r=0,o=0,u=0,d=0,h=1,x=0,v=0;this.aLen<2||$(".buoyFixedWrap .content").on({touchstart:function(f){t.stop(),i=!0;var c=f.originalEvent.changedTouches[0],l=c.clientX,p=c.clientY;n=l,e=p;var I=t.$content.css("transform");o=parseFloat(I.split(",")[4]||0),v=t.$content.innerWidth(),u=l,d=new Date().getTime(),h=1,x=0},touchmove:function(f){var c=f.originalEvent.changedTouches[0],l=c.clientX,p=c.clientY;i&&(s=Math.abs(l-n),r=Math.abs(p-e)),i=!1,s>r&&f.preventDefault(),t.sliderIndex<=-1?(o=-(t.aLen-1)*v,t.sliderIndex=t.aLen-1):t.sliderIndex>=t.aLen&&(o=0,t.sliderIndex=0);var I=o+l-n;t.$content.css({transition:"all 0s",transform:"translateX("+I+"px)"}),x=l-u,u=l;var m=new Date().getTime();h=m-d,d=m},touchend:function(f){var c=f.originalEvent.changedTouches[0].clientX,l=c-n,p=x/h;p>.4?(t.sliderIndex--,t.marquee.initRun()):p<-.4||l<-v/2?(t.sliderIndex++,t.marquee.initRun()):l>v/2&&(t.sliderIndex--,t.marquee.initRun()),t.$content.css({transition:"all 0.3s",transform:"translateX("+-t.sliderIndex*100+"%)"}),t.pointerChange(),t.run()}})},destroy:function(){this.isInitRun=!1,this.timeoutId&&clearTimeout(this.timeoutId)},log:{getPlatform:function(){return lhx.openBp.isiOS||lhx.openBp.isAndroid?"Mobile":"PC"},logIndex:-1,show:function(){var t;if(a.aLen>1){if($(".buoyFixedWrap").hasClass("hidden")||this.logIndex===a.sliderIndex+1)return;this.logIndex=a.sliderIndex+1,t=$(".buoyFixedWrap a").eq(a.sliderIndex+1)}else t=$(".buoyFixedWrap a");lhx.logUtils.newLog("ITEM","IMPRESS","SCENEGUIDE_IMPRESS",{sgID:t.attr("data-id"),positionID:t.attr("data-positionId"),Platform:this.getPlatform()})},click:function(t){lhx.logUtils.newLog("ITEM","CLICK","SCENEGUIDE_CLICK",{sgID:t.attr("data-id"),positionID:t.attr("data-positionId"),Platform:this.getPlatform()})},close:function(){var t;a.aLen>1?t=$(".buoyFixedWrap a").eq(a.sliderIndex+1):t=$(".buoyFixedWrap a"),lhx.logUtils.newLog("ITEM","CLICK","SCENEGUIDE_CLOSE",{sgID:t.attr("data-id"),positionID:t.attr("data-positionId"),Platform:this.getPlatform()})}}};$(document).on({click:function(t){t.stopPropagation(),t.preventDefault(),a.close(),a.log.close()}},".buoyFixedWrap .close"),$(document).on({click:function(t){t.stopPropagation(),t.preventDefault(),a.pointerTo($(this))}},".buoyFixedWrap .pointer button"),$(document).on({click:function(t){a.log.click($(this))}},".buoyFixedWrap .content a"),a.init()})(window,void 0);})();
